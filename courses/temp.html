<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>MathJax 测试</title>
  <!-- MathJax 配置 -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEnvironments: true,
        packages: {'[+]': ['mathtools', 'amsmath']}
      },
      options: {
        ignoreHtmlClass: 'tex2jax_ignore',
        processHtmlClass: 'tex2jax_process'
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script> 
  <!-- marked 解析器 -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> 
</head>
<body>

<div id="output"></div>

<script>
  const rawMarkdown = `
题目示例：

我在说$$
\\begin{bmatrix}
1 & 2 \\\\
3 & 4
\\end{bmatrix}
$$
然后呢？？$a = b^5$
$$
\\begin{cases}
x + y = 1 \\\\
2x - y = 3
\\end{cases}
$$
`;

  // 将 $$...$$ 替换为 <div class="math">...</div>
  const processed = rawMarkdown.replace(/\$\$(.+?)\$\$/gs, function(_, content) {
    return `<div class="math">${content.trim()}</div>`;
  });

  document.getElementById("output").innerHTML = marked.parse(processed);

  if (window.MathJax && MathJax.typesetPromise) {
    MathJax.typesetClear();
    MathJax.typesetPromise();
  }
</script>

</body>
</html>